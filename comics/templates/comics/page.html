{% extends 'comics/_base.html' %}

{% load static %}
{% load comics_extras %}
{% load render_bundle from webpack_loader %}

{% block skeletoncss %}
  {% if not debug %}
    {% render_bundle 'app' 'css' %}
  {% endif %}
{% endblock %}

{% block skeletonprecontent %}
<script>
  window.__INITIAL_STATE__ = {
    "base":{{ links.installment_url|json }},
    "page":{{ page|json }},
    "links":{{ links|json }},
    "total_pages":{{ total_pages|json }}
  };
</script>
{% endblock %}

{% block skeletoncontent %}
<div id="app" class="viewer">
  <div class="viewport">
    <img class="fit" src="{{ page.image_url }}" />
  </div>
  {% if links.next_url %}
  <a class="right arrow" href="{{ links.next_url }}">
  {% else %}
  <a class="right arrow disabled">
  {% endif %}
    <span class="icon">▶</span>
  </a>
  {% if links.prev_url %}
  <a class="left arrow" href="{{ links.prev_url }}">
  {% else %}
  <a class="left arrow disabled">
  {% endif %}
    <span class="icon">◀</span>
  </a>
  <a class="close" href="{{ links.installment_url }}">
    <span class="icon">✘</span>
  </a>
</div>
{% endblock %}

{% block skeletonpostcontent %}
  {% render_bundle 'vendor' 'js' %}
  {% render_bundle 'app' 'js' %}
{% endblock %}
